<div class="container">
    <div class="card shadow-lg">
        <div class="card-body">
            <h1 class="form-title text-center mb-4">
                <i class="bx bx-dumbbell"></i> REGISTRO DE ENTRENADOR
            </h1>

            <form [formGroup]="frmData">
                <!-- Datos Personales -->
                <div class="section-header">
                    <h3><i class="bi bi-person-fill"></i> Datos Personales</h3>
                </div>

                <!-- Grupo 1: Nombre, Apellido y Apodo -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="nombre" class="form-label">Nombre *</label>
                        <input type="text" id="nombre" formControlName="nombre" class="form-control"
                            [class.is-invalid]="isFieldInvalid('nombre')" placeholder="Ingrese su nombre" />
                        <div class="invalid-feedback">{{ getFieldError('nombre') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="apellido" class="form-label">Apellido *</label>
                        <input type="text" id="apellido" formControlName="apellido" class="form-control"
                            [class.is-invalid]="isFieldInvalid('apellido')" placeholder="Ingrese su apellido" />
                        <div class="invalid-feedback">{{ getFieldError('apellido') }}</div>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="apodo" class="form-label">Apodo</label>
                        <input type="text" id="apodo" formControlName="apodo" class="form-control"
                            placeholder="Ingrese su apodo (opcional)" />
                    </div>
                    <div class="col-md-6">
                        <label for="dni" class="form-label">DNI *</label>
                        <input type="text" id="dni" formControlName="dni" class="form-control"
                            [class.is-invalid]="isFieldInvalid('dni')" placeholder="Ingrese su DNI" />
                        <div class="invalid-feedback">{{ getFieldError('dni') }}</div>
                    </div>
                </div>

                <!-- Grupo 2: Fecha de Nacimiento y Celular -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="fecha_nacimiento" class="form-label">Fecha de Nacimiento *</label>
                        <input type="date" id="fecha_nacimiento" formControlName="fecha_nacimiento" class="form-control"
                            [class.is-invalid]="isFieldInvalid('fecha_nacimiento')" />
                        <div class="invalid-feedback">{{ getFieldError('fecha_nacimiento') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="celular" class="form-label">Celular *</label>
                        <input type="text" id="celular" formControlName="celular" class="form-control"
                            [class.is-invalid]="isFieldInvalid('celular')" placeholder="Ingrese su celular" />
                        <div class="invalid-feedback">{{ getFieldError('celular') }}</div>
                    </div>
                </div>

                <!-- Grupo 3: Dirección y Email -->
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="direccion" class="form-label">Dirección</label>
                        <input type="text" id="direccion" formControlName="direccion" class="form-control"
                            placeholder="Ingrese su dirección (opcional)" />
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="email" class="form-label">Email *</label>
                        <input type="email" id="email" formControlName="email" class="form-control"
                            [class.is-invalid]="isFieldInvalid('email')" placeholder="Ingrese su email" />
                        <div class="invalid-feedback">{{ getFieldError('email') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="fecha_ingreso" class="form-label">Fecha de Ingreso *</label>
                        <input type="date" id="fecha_ingreso" formControlName="fecha_ingreso" class="form-control"
                            [class.is-invalid]="isFieldInvalid('fecha_ingreso')" />
                        <div class="invalid-feedback">{{ getFieldError('fecha_ingreso') }}</div>
                    </div>
                </div>

                <!-- Contraseñas -->
                <div class="section-header">
                    <h3><i class="bi bi-shield-lock"></i> Seguridad</h3>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="password" class="form-label">Contraseña *</label>
                        <input type="password" id="password" formControlName="password" class="form-control"
                            [class.is-invalid]="isFieldInvalid('password')" placeholder="Ingrese su contraseña" />
                        <div class="invalid-feedback">{{ getFieldError('password') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="confirm_password" class="form-label">Confirmar Contraseña *</label>
                        <input type="password" id="confirm_password" formControlName="confirm_password"
                            class="form-control" [class.is-invalid]="isFieldInvalid('confirm_password')"
                            placeholder="Confirme su contraseña" />
                        <div class="invalid-feedback">{{ getFieldError('confirm_password') }}</div>
                    </div>
                </div>

                <!-- Selección de Gimnasios -->
                <div class="section-header">
                    <h3><i class="bi bi-building"></i> Información Profesional</h3>
                </div>

                <app-cbo-gimnasios-multiples [label]="'Gimnasios donde desea trabajar'"
                    [selectedGimnasios]="frmData.get('gimnasios')?.value"
                    (valueChange)="frmData.get('gimnasios')?.setValue($event)" [isDisabled]="false">
                </app-cbo-gimnasios-multiples>

                <!-- Términos y Condiciones -->
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="form-check">
                            <input class="checkbox" type="checkbox"
                                [class.is-invalid]="isFieldInvalid('acepta_terminos')" id="acepta_terminos"
                                formControlName="acepta_terminos">
                            <label class="form-check-label text-white" for="acepta_terminos">
                                Acepto los términos y condiciones para entrenadores *
                            </label>
                            <div class="invalid-feedback">{{ getFieldError('acepta_terminos') }}</div>
                        </div>
                    </div>
                </div>

                <!-- Botones -->
                <div class="row">
                    <div class="col-md-6">
                        <button type="button" class="btn btn-secondary btn-block" (click)="volverASeleccion()">
                            <i class="bi bi-arrow-left"></i> Volver
                        </button>
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn btn-primary btn-block" (click)="openModal()"
                            [disabled]="frmData.invalid">
                            <i class="bi bi-check-circle-fill"></i> Registrarse
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal de Confirmación -->
<app-modal-confirm [visible]="isModalVisible" [title]="'Confirmación de Registro'"
    [message]="'¿Estás seguro de registrarte como entrenador con estos datos?'" (confirm)="handleConfirm()"
    (cancel)="handleCancel()">
</app-modal-confirm>