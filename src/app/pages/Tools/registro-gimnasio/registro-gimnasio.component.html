<div class="container">
    <div class="card shadow-lg">
        <div class="card-body">
            <h1 class="form-title text-center mb-4">
                <i class="bx bx-building"></i> REGISTRO DE GIMNASIO
            </h1>

            <form [formGroup]="gimnasioForm">
                <!-- Datos del Representante Legal -->
                <div class="section-header">
                    <h3><i class="bi bi-person-badge"></i> Datos del Representante Legal</h3>
                </div>

                <!-- Grupo 1: Nombre, Apellido y DNI -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="nombre" class="form-label">Nombre *</label>
                        <input type="text" id="nombre" formControlName="nombre" class="form-control"
                            [class.is-invalid]="isFieldInvalid('nombre')"
                            placeholder="Nombre del representante legal" />
                        <div class="invalid-feedback">{{ getFieldError('nombre') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="apellido" class="form-label">Apellido *</label>
                        <input type="text" id="apellido" formControlName="apellido" class="form-control"
                            [class.is-invalid]="isFieldInvalid('apellido')"
                            placeholder="Apellido del representante legal" />
                        <div class="invalid-feedback">{{ getFieldError('apellido') }}</div>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="dni" class="form-label">DNI *</label>
                        <input type="text" id="dni" formControlName="dni" class="form-control"
                            [class.is-invalid]="isFieldInvalid('dni')" placeholder="DNI del representante legal" />
                        <div class="invalid-feedback">{{ getFieldError('dni') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="fecha_nacimiento" class="form-label">Fecha de Nacimiento *</label>
                        <input type="date" id="fecha_nacimiento" formControlName="fecha_nacimiento" class="form-control"
                            [class.is-invalid]="isFieldInvalid('fecha_nacimiento')" />
                        <div class="invalid-feedback">{{ getFieldError('fecha_nacimiento') }}</div>
                    </div>
                </div>

                <!-- Contacto del Representante -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="celular" class="form-label">Celular *</label>
                        <input type="text" id="celular" formControlName="celular" class="form-control"
                            [class.is-invalid]="isFieldInvalid('celular')" placeholder="Celular del representante" />
                        <div class="invalid-feedback">{{ getFieldError('celular') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="email" class="form-label">Email Personal *</label>
                        <input type="email" id="email" formControlName="email" class="form-control"
                            [class.is-invalid]="isFieldInvalid('email')" placeholder="Email del representante" />
                        <div class="invalid-feedback">{{ getFieldError('email') }}</div>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="direccion" class="form-label">Dirección Personal</label>
                        <input type="text" id="direccion" formControlName="direccion" class="form-control"
                            placeholder="Dirección del representante (opcional)" />
                    </div>
                </div>

                <!-- Contraseñas -->
                <div class="section-header">
                    <h3><i class="bi bi-shield-lock"></i> Seguridad</h3>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="password" class="form-label">Contraseña *</label>
                        <input type="password" id="password" formControlName="password" class="form-control"
                            [class.is-invalid]="isFieldInvalid('password')" placeholder="Contraseña de acceso" />
                        <div class="invalid-feedback">{{ getFieldError('password') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="confirm_password" class="form-label">Confirmar Contraseña *</label>
                        <input type="password" id="confirm_password" formControlName="confirm_password"
                            class="form-control" [class.is-invalid]="isFieldInvalid('confirm_password')"
                            placeholder="Confirme la contraseña" />
                        <div class="invalid-feedback">{{ getFieldError('confirm_password') }}</div>
                    </div>
                </div>

                <!-- Datos del Gimnasio -->
                <div class="section-header">
                    <h3><i class="bi bi-building"></i> Información del Gimnasio</h3>
                </div>

                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="nombre_gimnasio" class="form-label">Nombre del Gimnasio *</label>
                        <input type="text" id="nombre_gimnasio" formControlName="nombre_gimnasio" class="form-control"
                            [class.is-invalid]="isFieldInvalid('nombre_gimnasio')"
                            placeholder="Nombre comercial del gimnasio" />
                        <div class="invalid-feedback">{{ getFieldError('nombre_gimnasio') }}</div>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="direccion_gimnasio" class="form-label">Dirección del Gimnasio *</label>
                        <input type="text" id="direccion_gimnasio" formControlName="direccion_gimnasio"
                            class="form-control" [class.is-invalid]="isFieldInvalid('direccion_gimnasio')"
                            placeholder="Dirección completa del gimnasio" />
                        <div class="invalid-feedback">{{ getFieldError('direccion_gimnasio') }}</div>
                    </div>
                </div>

                <!-- Horarios -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="horario_apertura" class="form-label">Horario de Apertura *</label>
                        <input type="time" id="horario_apertura" formControlName="horario_apertura" class="form-control"
                            [class.is-invalid]="isFieldInvalid('horario_apertura')" />
                        <div class="invalid-feedback">{{ getFieldError('horario_apertura') }}</div>
                    </div>
                    <div class="col-md-6">
                        <label for="horario_cierre" class="form-label">Horario de Cierre *</label>
                        <input type="time" id="horario_cierre" formControlName="horario_cierre" class="form-control"
                            [class.is-invalid]="isFieldInvalid('horario_cierre')" />
                        <div class="invalid-feedback">{{ getFieldError('horario_cierre') }}</div>
                    </div>
                </div>

                <!-- Descripción -->
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="descripcion" class="form-label">Descripción del Gimnasio *</label>
                        <textarea id="descripcion" formControlName="descripcion" class="form-control"
                            [class.is-invalid]="isFieldInvalid('descripcion')" rows="4"
                            placeholder="Describe tu gimnasio, servicios, equipamiento, etc.">
            </textarea>
                        <div class="invalid-feedback">{{ getFieldError('descripcion') }}</div>
                    </div>
                </div>

                <!-- Página Web -->
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="pagina_web" class="form-label">Página Web</label>
                        <input type="url" id="pagina_web" formControlName="pagina_web" class="form-control"
                            [class.is-invalid]="isFieldInvalid('pagina_web')"
                            placeholder="https://www.ejemplo.com (opcional)" />
                        <div class="invalid-feedback">{{ getFieldError('pagina_web') }}</div>
                    </div>
                </div>

                <!-- Términos y Condiciones -->
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="form-check">
                            <input class="checkbox" type="checkbox"
                                [class.is-invalid]="isFieldInvalid('acepta_terminos')" id="acepta_terminos"
                                formControlName="acepta_terminos">
                            <label class="form-check-label text-white" for="acepta_terminos">
                                Acepto los términos y condiciones para gimnasios *
                            </label>
                            <button type="button" class="btn btn-link p-0 ms-2" (click)="showTerminos = true">
                                Ver términos y condiciones
                            </button>
                            <div class="invalid-feedback">{{ getFieldError('acepta_terminos') }}</div>
                        </div>
                    </div>
                </div>

                <!-- Botones -->
                <div class="row">
                    <div class="col-md-6">
                        <button type="button" class="btn btn-secondary btn-block" (click)="volverASeleccion()">
                            <i class="bi bi-arrow-left"></i> Volver
                        </button>
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn btn-primary btn-block" (click)="openModal()"
                            [disabled]="gimnasioForm.invalid">
                            <i class="bi bi-check-circle-fill"></i> Registrar Gimnasio
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal de Confirmación -->
<app-modal-confirm [visible]="isModalVisible" [title]="'Confirmación de Registro'"
    [message]="'¿Estás seguro de registrar este gimnasio con estos datos?'" (confirm)="handleConfirm()"
    (cancel)="handleCancel()">
</app-modal-confirm>

<!-- Modal de Términos y Condiciones para Gimnasios -->
<div class="modal fade" [class.show]="showTerminos" [style.display]="showTerminos ? 'block' : 'none'" tabindex="-1"
    role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content card-base"
            style="background: var(--primary-gradient); color: var(--text-primary); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-hover);">
            <div class="modal-header" style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                <h5 class="modal-title" style="display:flex;align-items:center;gap:0.5rem;">
                    <i class="bi bi-heart-fill text-danger" style="font-size:1.5rem;"></i>
                    <span>Términos y Condiciones para Gimnasios</span>
                </h5>
                <button type="button" class="btn-close btn-secondary-base" (click)="showTerminos = false"></button>
            </div>
            <div class="modal-body" style="max-height:60vh;overflow-y:auto;">
                <div style="padding:1rem;">
                    <div style="text-align:center;margin-bottom:1rem;">
                        <i class="bx bx-building" style="font-size:2rem;color:#ffde04;"></i>
                        <span style="font-size:1.2rem;font-weight:600;color:#e0811a;">¡Bienvenido gimnasio!</span>
                        <p style="color:var(--text-secondary);margin-top:0.5rem;">Queremos que tu experiencia sea
                            excelente. Lee con atención nuestros términos:</p>
                    </div>
                    <ul style="list-style:none;padding-left:0;">
                        <li style="margin-bottom:1rem;">
                            <span style="font-weight:600;color:#ffde04;"><i class="bi bi-person-check"></i> Registro y
                                veracidad:</span>
                            <span style="color:var(--text-secondary);"> Los datos proporcionados deben ser verídicos y
                                completos. La falsedad puede implicar suspensión o eliminación de la cuenta.</span>
                        </li>
                        <li style="margin-bottom:1rem;">
                            <span style="font-weight:600;color:#ffde04;"><i class="bi bi-people-fill"></i> Uso de la
                                plataforma:</span>
                            <span style="color:var(--text-secondary);"> Compromiso de respeto y responsabilidad. Evita
                                conductas ofensivas, fraudulentas o ilegales.</span>
                        </li>
                        <li style="margin-bottom:1rem;">
                            <span style="font-weight:600;color:#ffde04;"><i class="bi bi-shield-lock"></i>
                                Privacidad:</span>
                            <span style="color:var(--text-secondary);"> Tus datos serán tratados conforme a la política
                                de privacidad. Puedes solicitar la eliminación de tu cuenta y datos en cualquier
                                momento.</span>
                        </li>
                        <li style="margin-bottom:1rem;">
                            <span style="font-weight:600;color:#ffde04;"><i class="bi bi-heart-pulse"></i>
                                Responsabilidad:</span>
                            <span style="color:var(--text-secondary);"> El gimnasio es responsable de la seguridad y
                                bienestar de sus usuarios. La plataforma no se responsabiliza por daños, accidentes o
                                consecuencias derivadas de la gestión del gimnasio.</span>
                        </li>
                        <li style="margin-bottom:1rem;">
                            <span style="font-weight:600;color:#ffde04;"><i class="bi bi-exclamation-triangle-fill"></i>
                                Exención de responsabilidad:</span>
                            <span style="color:var(--text-secondary);">
                                El uso de la plataforma y la gestión de actividades son bajo tu propio riesgo. La
                                plataforma, sus desarrolladores y colaboradores quedan eximidos de cualquier
                                responsabilidad por daños, pérdidas, lesiones o consecuencias derivadas del uso de la
                                información, servicios o actividades ofrecidas. Consulta siempre con profesionales y
                                cumple con la normativa vigente.
                            </span>
                        </li>
                        <li style="margin-bottom:1rem;">
                            <span style="font-weight:600;color:#ffde04;"><i class="bi bi-pencil-square"></i>
                                Modificaciones:</span>
                            <span style="color:var(--text-secondary);"> Los términos pueden cambiar. Te avisaremos sobre
                                cambios relevantes.</span>
                        </li>
                        <li style="margin-bottom:1rem;">
                            <span style="font-weight:600;color:#ffde04;"><i class="bi bi-copyright"></i> Propiedad
                                intelectual:</span>
                            <span style="color:var(--text-secondary);"> El contenido está protegido. No copies,
                                distribuyas ni modifiques sin autorización.</span>
                        </li>
                        <li style="margin-bottom:1rem;">
                            <span style="font-weight:600;color:#ffde04;"><i class="bi bi-envelope-heart"></i>
                                Contacto:</span>
                            <span style="color:var(--text-secondary);"> Para consultas o reclamos, comunícate con
                                nuestro soporte. ¡Estamos para ayudarte!</span>
                        </li>
                    </ul>
                    <div style="text-align:center;margin-top:2rem;">
                        <span style="font-size:1.1rem;color:#4CAF50;font-weight:600;">
                            Al registrar tu gimnasio, aceptas estos términos y condiciones.<br>
                            <i class="bi bi-emoji-heart-eyes" style="font-size:1.5rem;color:#ffde04;"></i>
                        </span>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-top: 1px solid rgba(255,255,255,0.1);">
                <button type="button" class="btn btn-secondary-base" (click)="showTerminos = false">Cerrar</button>
            </div>
        </div>
    </div>
</div>