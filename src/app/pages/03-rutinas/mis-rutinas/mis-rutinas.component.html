<!-- Tarjeta con transparencia -->
<div class="card shadow-lg">
    <div class="card-body">
        <!-- Título dentro del formulario -->
        <h1 class="form-title text-center mb-4">
            <i class="fas fa-list-check"></i> MIS RUTINAS
        </h1>

        <!-- INFO - Información de rutinas -->
        <div class="alert alert-info mb-4" *ngIf="rutinas.length > 0">
            <h6>INFORMACIÓN DE MIS RUTINAS:</h6>
            <p class="mb-1">Total rutinas: <strong>{{ rutinas.length }}</strong></p>
            <p class="mb-1">Mis rutinas creadas: <strong>{{ rutinasDelAtleta.length }}</strong></p>
            <p class="mb-1">Rutinas del entrenador: <strong>{{ rutinasDelEntrenador.length }}</strong></p>
            <p class="mb-1">Rutinas del gimnasio: <strong>{{ rutinasDelGimnasio.length }}</strong></p>
            <p class="mb-1">Rutinas genéricas de entrenador: <strong>{{ rutinasGenericasEntrenador.length }}</strong>
            </p>
            <p class="mb-0">Rutinas genéricas de gimnasio: <strong>{{ rutinasGenericasGimnasio.length }}</strong></p>
        </div>

        <div *ngIf="rutinas.length > 0; else noData">

            <!-- Sección: Rutinas del Entrenador -->
            <div *ngIf="rutinasDelEntrenador.length > 0" class="mb-5">
                <h3 class="section-title text-primary mb-3">
                    <i class="fas fa-user-tie"></i> Rutinas Asignadas por mi Entrenador ({{ rutinasDelEntrenador.length
                    }})
                </h3>
                <div class="card border-primary">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-primary">
                                    <tr>
                                        <th>Nombre</th>
                                        <th class="hide-mobile">Fecha Creación</th>
                                        <th class="hide-mobile">Objetivo</th>
                                        <th class="hide-mobile">Nivel</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasDelEntrenador">
                                        <td>{{ rutina.nombre }}</td>
                                        <td class="hide-mobile">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile">{{ rutina.nivel_atleta }}</td>
                                        <td>
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Rutinas del Gimnasio -->
            <div *ngIf="rutinasDelGimnasio.length > 0" class="mb-5">
                <h3 class="section-title text-success mb-3">
                    <i class="fas fa-dumbbell"></i> Rutinas del Gimnasio ({{ rutinasDelGimnasio.length }})
                </h3>
                <div class="card border-success">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-success">
                                    <tr>
                                        <th>Nombre</th>
                                        <th class="hide-mobile">Fecha Creación</th>
                                        <th class="hide-mobile">Objetivo</th>
                                        <th class="hide-mobile">Nivel</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasDelGimnasio">
                                        <td>{{ rutina.nombre }}</td>
                                        <td class="hide-mobile">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile">{{ rutina.nivel_atleta }}</td>
                                        <td>
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Mis Rutinas Creadas -->
            <div *ngIf="rutinasDelAtleta.length > 0" class="mb-5">
                <h3 class="section-title text-warning mb-3">
                    <i class="fas fa-user-edit"></i> Mis Rutinas Creadas ({{ rutinasDelAtleta.length }})
                </h3>
                <div class="card border-warning">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-warning">
                                    <tr>
                                        <th>Nombre</th>
                                        <th class="hide-mobile">Fecha Creación</th>
                                        <th class="hide-mobile">Objetivo</th>
                                        <th class="hide-mobile">Nivel</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasDelAtleta">
                                        <td>{{ rutina.nombre }}</td>
                                        <td class="hide-mobile">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile">{{ rutina.nivel_atleta }}</td>
                                        <td>
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                            <span class="icon-edit ms-2" (click)="editarRutina(rutina.id_rutina)"
                                                title="Editar rutina">
                                                <i class="bi bi-pencil-fill text-warning fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Rutinas Genéricas de Entrenador -->
            <div *ngIf="rutinasGenericasEntrenador.length > 0" class="mb-5">
                <h3 class="section-title text-info mb-3">
                    <i class="fas fa-user-tie"></i> Rutinas Genéricas de Entrenador ({{
                    rutinasGenericasEntrenador.length }})
                </h3>
                <div class="card border-info">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-info">
                                    <tr>
                                        <th>Nombre</th>
                                        <th class="hide-mobile">Fecha Creación</th>
                                        <th class="hide-mobile">Objetivo</th>
                                        <th class="hide-mobile">Nivel</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasGenericasEntrenador">
                                        <td>{{ rutina.nombre }}</td>
                                        <td class="hide-mobile">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile">{{ rutina.nivel_atleta }}</td>
                                        <td>
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Rutinas Genéricas de Gimnasio -->
            <div *ngIf="rutinasGenericasGimnasio.length > 0" class="mb-5">
                <h3 class="section-title text-secondary mb-3">
                    <i class="fas fa-dumbbell"></i> Rutinas Genéricas de Gimnasio ({{ rutinasGenericasGimnasio.length
                    }})
                </h3>
                <div class="card border-secondary">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-secondary">
                                    <tr>
                                        <th>Nombre</th>
                                        <th class="hide-mobile">Fecha Creación</th>
                                        <th class="hide-mobile">Objetivo</th>
                                        <th class="hide-mobile">Nivel</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasGenericasGimnasio">
                                        <td>{{ rutina.nombre }}</td>
                                        <td class="hide-mobile">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile">{{ rutina.nivel_atleta }}</td>
                                        <td>
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FALLBACK: Mostrar todas las rutinas si no hay categorización -->
            <div *ngIf="rutinasDelEntrenador.length === 0 && rutinasDelGimnasio.length === 0 && rutinasDelAtleta.length === 0"
                class="mb-5">
                <h3 class="section-title text-secondary mb-3">
                    <i class="fas fa-question-circle"></i> Todas las Rutinas (Sin categorizar)
                </h3>
                <div class="card border-secondary">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-secondary">
                                    <tr>
                                        <th>Nombre</th>
                                        <th>ID Creador</th>
                                        <th class="hide-mobile">Asignada a</th>
                                        <th class="hide-mobile">Fecha Creación</th>
                                        <th class="hide-mobile">Objetivo</th>
                                        <th class="hide-mobile">Nivel</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinas">
                                        <td>{{ rutina.nombre }}</td>
                                        <td>{{ rutina.id_creador }}</td>
                                        <td class="hide-mobile">{{ rutina.id_atleta || 'General' }}</td>
                                        <td>{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile">{{ rutina.nivel_atleta }}</td>
                                        <td>
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Mensaje cuando no hay datos -->
        <ng-template #noData>
            <div class="alert alert-warning d-flex align-items-center p-4">
                <i class="bi bi-exclamation-triangle-fill me-3 fs-2 text-warning"></i>
                <p class="mb-0">No hay rutinas disponibles para este atleta.</p>
            </div>
        </ng-template>
    </div>
</div>