<!-- Tarjeta con transparencia -->
<div class="card shadow-lg">
    <div class="card-body">
        <!-- Título dentro del formulario -->
        <h1 class="form-title text-center mb-4">
            <i class="fas fa-list-check"></i> MIS RUTINAS
        </h1>

        <!-- INFO - Información de rutinas -->
        <div class="alert alert-info mb-4" *ngIf="rutinas.length > 0">
            <h6>INFORMACIÓN DE MIS RUTINAS:</h6>
            <!-- <p class="mb-1">Total rutinas: <strong>{{ rutinas.length }}</strong></p> -->
            <p class="mb-1">Mis rutinas creadas: <strong>{{ rutinasDelAtleta.length }}</strong></p>
            <p class="mb-1">Rutinas del entrenador: <strong>{{ rutinasDelEntrenador.length }}</strong></p>
            <p class="mb-1">Rutinas del gimnasio: <strong>{{ rutinasDelGimnasio.length }}</strong></p>
            <p class="mb-1">Rutinas genéricas de entrenador: <strong>{{ rutinasGenericasEntrenador.length }}</strong>
            </p>
            <p class="mb-1">Rutinas genéricas de gimnasio: <strong>{{ rutinasGenericasGimnasio.length }}</strong></p>
            <p class="mb-0">Rutinas de la app: <strong>{{ rutinasGenericasApp.length }}</strong></p>
        </div>

        <div *ngIf="rutinas.length > 0; else noData">

            <!-- Sección: Rutinas del Entrenador -->
            <div *ngIf="rutinasDelEntrenador.length > 0" class="mb-5">
                <h3 class="section-title text-primary mb-3">
                    <i class="fas fa-user-tie"></i> Rutinas Asignadas por mi Entrenador
                </h3>
                <div class="card border-primary">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-primary">
                                    <tr>
                                        <th class="text-start">Nombre</th>
                                        <th class="text-center">Fecha Creación</th>
                                        <th class="hide-mobile text-center">Objetivo</th>
                                        <th class="hide-mobile text-center">Nivel</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasDelEntrenador">
                                        <td class="text-start">{{ rutina.nombre }}</td>
                                        <td class="text-center">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.nivel_atleta }}</td>
                                        <td class="text-center">
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Rutinas del Gimnasio -->
            <div *ngIf="rutinasDelGimnasio.length > 0" class="mb-5">
                <h3 class="section-title text-success mb-3">
                    <i class="fas fa-dumbbell"></i> Rutinas del Gimnasio
                </h3>
                <div class="card border-success">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-success">
                                    <tr>
                                        <th class="text-start">Nombre</th>
                                        <th class="text-center">Fecha Creación</th>
                                        <th class="hide-mobile text-center">Objetivo</th>
                                        <th class="hide-mobile text-center">Nivel</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasDelGimnasio">
                                        <td class="text-start">{{ rutina.nombre }}</td>
                                        <td class="text-center">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.nivel_atleta }}</td>
                                        <td class="text-center">
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Mis Rutinas Creadas -->
            <div *ngIf="rutinasDelAtleta.length > 0" class="mb-5">
                <h3 class="section-title text-warning mb-3">
                    <i class="fas fa-user-edit"></i> Mis Rutinas
                </h3>
                <div class="card border-warning">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-warning">
                                    <tr>
                                        <th class="text-start">Nombre</th>
                                        <th class="text-center">Fecha Creación</th>
                                        <th class="hide-mobile text-center">Objetivo</th>
                                        <th class="hide-mobile text-center">Nivel</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasDelAtleta">
                                        <td class="text-start">{{ rutina.nombre }}</td>
                                        <td class="text-center">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.nivel_atleta }}</td>
                                        <td class="text-center">
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                            <span class="icon-edit ms-2" (click)="editarRutina(rutina.id_rutina)"
                                                title="Editar rutina">
                                                <i class="bi bi-pencil-fill text-warning fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Rutinas Genéricas de Entrenador -->
            <div *ngIf="rutinasGenericasEntrenador.length > 0" class="mb-5">
                <h3 class="section-title text-info mb-3">
                    <i class="fas fa-user-tie"></i> Rutinas Genéricas de Entrenador
                </h3>
                <div class="card border-info">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-info">
                                    <tr>
                                        <th class="text-start">Nombre</th>
                                        <th class="text-center">Fecha Creación</th>
                                        <th class="hide-mobile text-center">Objetivo</th>
                                        <th class="hide-mobile text-center">Nivel</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasGenericasEntrenador">
                                        <td class="text-start">{{ rutina.nombre }}</td>
                                        <td class="text-center">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.nivel_atleta }}</td>
                                        <td class="text-center">
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Rutinas Genéricas de Gimnasio -->
            <div *ngIf="rutinasGenericasGimnasio.length > 0" class="mb-5">
                <h3 class="section-title text-secondary mb-3">
                    <i class="fas fa-dumbbell"></i> Rutinas Genéricas de Gimnasio
                </h3>
                <div class="card border-secondary">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-secondary">
                                    <tr>
                                        <th class="text-start">Nombre</th>
                                        <th class="text-center">Fecha Creación</th>
                                        <th class="hide-mobile text-center">Objetivo</th>
                                        <th class="hide-mobile text-center">Nivel</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasGenericasGimnasio">
                                        <td class="text-start">{{ rutina.nombre }}</td>
                                        <td class="text-center">{{ rutina.fecha_asignacion | date: 'dd/MM/yyyy' }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.nivel_atleta }}</td>
                                        <td class="text-center">
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rutinas de la App -->
            <div *ngIf="rutinasGenericasApp.length > 0" class="mb-5">
                <h3 class="section-title text-primary mb-3">
                    <i class="fas fa-mobile-alt"></i> Rutinas de la App
                </h3>
                <div class="card border-dark">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-dark">
                                    <tr>
                                        <th class="text-start">Nombre</th>
                                        <th class="hide-mobile text-center">Objetivo</th>
                                        <th class="hide-mobile text-center">Nivel</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinasGenericasApp">
                                        <td class="text-start">{{ rutina.nombre }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.nivel_atleta }}</td>
                                        <td class="text-center">
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FALLBACK: Mostrar todas las rutinas si no hay categorización -->
            <div *ngIf="rutinasDelAtleta.length === 0 && rutinasDelEntrenador.length === 0 && rutinasDelGimnasio.length === 0 && rutinasGenericasEntrenador.length === 0 && rutinasGenericasGimnasio.length === 0 && rutinasGenericasApp.length === 0 && rutinas.length > 0"
                class="mb-5">
                <h3 class="section-title text-secondary mb-3">
                    <i class="fas fa-question-circle"></i> Todas las Rutinas (Sin categorizar)
                </h3>
                <div class="card border-secondary">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table custom-table">
                                <thead class="table-secondary">
                                    <tr>
                                        <th class="text-start">Nombre</th>
                                        <th class="text-center">ID Creador</th>
                                        <th class="hide-mobile text-center">Objetivo</th>
                                        <th class="hide-mobile text-center">Nivel</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let rutina of rutinas">
                                        <td class="text-start">{{ rutina.nombre }}</td>
                                        <td class="text-center">{{ rutina.id_creador }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.objetivo }}</td>
                                        <td class="hide-mobile text-center">{{ rutina.nivel_atleta }}</td>
                                        <td class="text-center">
                                            <span class="icon-view" (click)="verDetallesRutina(rutina.id_rutina)"
                                                title="Ver rutina">
                                                <i class="bi bi-eye-fill text-info fs-5"></i>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Mensaje cuando no hay datos -->
        <ng-template #noData>
            <div class="alert alert-warning d-flex align-items-center p-4">
                <i class="bi bi-exclamation-triangle-fill me-3 fs-2 text-warning"></i>
                <p class="mb-0">No hay rutinas disponibles para este atleta.</p>
            </div>
        </ng-template>
    </div>
</div>